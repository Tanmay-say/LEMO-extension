console.log("Lemo AI Assistant: Background script starting...");chrome.action.onClicked.addListener(async e=>{try{console.log("Lemo AI Assistant: Extension icon clicked for tab",e.id),await chrome.tabs.sendMessage(e.id,{action:"toggle_overlay"})}catch(t){console.log("Lemo AI Assistant: Error sending message:",t);try{await chrome.scripting.executeScript({target:{tabId:e.id},files:["src/content/index.jsx"]}),await chrome.scripting.insertCSS({target:{tabId:e.id},files:["src/styles/globals.css"]}),setTimeout(async()=>{try{await chrome.tabs.sendMessage(e.id,{action:"toggle_overlay"})}catch(o){console.log("Could not send message after injection:",o)}},500)}catch(o){console.log("Could not inject content script:",o)}}});chrome.runtime.onMessage.addListener((e,t,o)=>(e.action==="overlay_toggled"&&(chrome.action.setBadgeText({text:e.isVisible?"ON":"",tabId:t.tab.id}),chrome.action.setBadgeBackgroundColor({color:"#667eea",tabId:t.tab.id})),o({success:!0}),!0));chrome.tabs.onRemoved.addListener(e=>{chrome.action.setBadgeText({text:"",tabId:e})});chrome.tabs.onUpdated.addListener((e,t)=>{t.status==="loading"&&chrome.action.setBadgeText({text:"",tabId:e})});console.log("Lemo AI Assistant: Background script initialized");
